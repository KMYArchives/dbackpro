"use strict";window.onload=function(e){El.text(el_splash_text,"Loading..."),SplashScreen.folders(),SplashScreen.download_db(),SplashScreen.download_sync(),Avatar.user(),Avatar.default(),SplashScreen.close_splash()};var Avatar={user:function(){var e;Storage.has("userData")&&!File.has(Core.get_file("app/cache","avatar.png"))&&(e=JSON.parse(Storage.get("userData")),download(e.gravatar).pipe(fs.createWriteStream(Core.get_file("app/cache","avatar.png"))),setTimeout(function(e){El.text(el_splash_text,"Download user avatar...")},1e3))},default:function(){download("https://i.imgur.com/k73r6An.png").pipe(fs.createWriteStream(Core.get_file("app/cache","avatar.png"))),setTimeout(function(e){El.text(el_splash_text,"Download avatar...")},1e3)}},el_splash_text=".splash-txt",SplashScreen={folders:function(){setTimeout(function(e){File.new_folder([Core.get_path("app"),Core.get_path("app/cache"),Core.get_path("app/tasks"),Core.get_path("app/dumps"),Core.get_path("app/models"),Core.get_path("app/clients"),Core.get_path("app/plugins"),Core.get_path("app/diagrams"),Core.get_path("app/functions")])&&El.text(el_splash_text,"Creating folders...")},1e3)},download_db:function(){setTimeout(function(e){fetch("".concat(Apis.core(),"private/app-files/list-all?product=dbackpro")).then(function(e){return e.json()}).then(function(e){_.forEach(e.list,function(e){File.has(Core.get_file("app",e.original_name))||download(Find.replace(e.download,"https","http")).pipe(fs.createWriteStream(Core.get_file("app",e.original_name)))&&El.text(el_splash_text,"File was downloaded with successfully...")})})},1e3)},close_splash:function(){setTimeout(function(e){Windows.load_main()},4e3)},download_sync:function(){Storage.has("userData")&&setTimeout(function(e){var t=JSON.parse(Storage.get("userData"));fetch("".concat(Apis.core(),"private/backups/get?product=dbackpro&username=").concat(t.id)).then(function(e){return e.json()}).then(function(e){_.forEach(e.list,function(e){File.has(Core.get_file("app",e.original_name))||download(Find.replace(e.download,"https","http")).pipe(fs.createWriteStream(Core.get_file("app",e.original_name)))&&El.text(el_splash_text,"File was downloaded with successfully...")})})},1e3)}};